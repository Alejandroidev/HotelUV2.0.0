using AutoMapper;using MediatR;using ReservaHotel.Application.RoomAmenities.Queries;using ReservaHotel.Application.RoomAmenities.Specifications;using ReservaHotel.Application.Interfaces.General;using ReservaHotel.Domain.Entities;using ReservaHotel.Domain.Entities.Base;namespace ReservaHotel.Application.RoomAmenities.Handlers{ public class GetAmenitiesByRoomHandler: IRequestHandler<GetAmenitiesByRoomQuery, CustomWebResponse>{ private readonly IReadRepository<RoomAmenity> _repo; private readonly IMapper _mapper; public GetAmenitiesByRoomHandler(IReadRepository<RoomAmenity> repo, IMapper mapper){ _repo=repo; _mapper=mapper;} public async Task<CustomWebResponse> Handle(GetAmenitiesByRoomQuery request, CancellationToken ct){ var spec= new RoomAmenitiesByRoomSpec(request.RoomId); var list= await _repo.ListAsync(spec, ct); var dto=list.Select(x=> x.Amenity).ToList(); return new CustomWebResponse{ ResponseBody= _mapper.Map<List<Application.Common.Dtos.AmenityDto>>(dto)}; } } }