using MediatR;using ReservaHotel.Application.RoomAmenities.Commands;using ReservaHotel.Application.RoomAmenities.Specifications;using ReservaHotel.Application.Interfaces.General;using ReservaHotel.Domain.Entities;using ReservaHotel.Domain.Entities.Base;using System.Net;namespace ReservaHotel.Application.RoomAmenities.Handlers{ public class RemoveRoomAmenityHandler: IRequestHandler<RemoveRoomAmenityCommand, CustomWebResponse>{ private readonly IRepository<RoomAmenity> _repo; public RemoveRoomAmenityHandler(IRepository<RoomAmenity> repo){ _repo=repo;} public async Task<CustomWebResponse> Handle(RemoveRoomAmenityCommand request, CancellationToken ct){ var entity= await _repo.FirstOrDefaultAsync(new RoomAmenityKeySpec(request.RoomId, request.AmenityId), ct); if(entity==null) return new CustomWebResponse(true){ StatusCode=System.Net.HttpStatusCode.NotFound, Message= "Not found"}; await _repo.DeleteAsync(entity, ct); return new CustomWebResponse{ ResponseBody= new { request.RoomId, request.AmenityId } }; } } }