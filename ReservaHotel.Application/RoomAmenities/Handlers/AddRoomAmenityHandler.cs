using MediatR;using ReservaHotel.Application.RoomAmenities.Commands;using ReservaHotel.Application.RoomAmenities.Specifications;using ReservaHotel.Application.Interfaces.General;using ReservaHotel.Domain.Entities;using ReservaHotel.Domain.Entities.Base;using System.Net;namespace ReservaHotel.Application.RoomAmenities.Handlers{ public class AddRoomAmenityHandler: IRequestHandler<AddRoomAmenityCommand, CustomWebResponse>{ private readonly IRepository<RoomAmenity> _repo; public AddRoomAmenityHandler(IRepository<RoomAmenity> repo){ _repo=repo;} public async Task<CustomWebResponse> Handle(AddRoomAmenityCommand request, CancellationToken ct){ var exists= await _repo.FirstOrDefaultAsync(new RoomAmenityKeySpec(request.RoomId, request.AmenityId), ct); if(exists!=null) return new CustomWebResponse{ ResponseBody= "Already exists"}; var entity= new RoomAmenity{ RoomId= request.RoomId, AmenityId= request.AmenityId }; await _repo.AddAsync(entity, ct); return new CustomWebResponse{ ResponseBody= new { request.RoomId, request.AmenityId } }; } } }