using AutoMapper;using MediatR;using ReservaHotel.Application.PqrCases.Queries;using ReservaHotel.Application.PqrCases.Specifications;using ReservaHotel.Application.Interfaces.General;using ReservaHotel.Domain.Entities;using ReservaHotel.Domain.Entities.Base;using System.Net;namespace ReservaHotel.Application.PqrCases.Handlers{ public class GetPqrCaseByIdHandler: IRequestHandler<GetPqrCaseByIdQuery, CustomWebResponse>{ private readonly IReadRepository<PqrCase> _repo; private readonly IMapper _mapper; public GetPqrCaseByIdHandler(IReadRepository<PqrCase> repo, IMapper mapper){ _repo=repo; _mapper=mapper;} public async Task<CustomWebResponse> Handle(GetPqrCaseByIdQuery request, CancellationToken ct){ var spec=new PqrCaseByIdSpec(request.Id); var entity= await _repo.FirstOrDefaultAsync(spec, ct); if(entity==null) return new CustomWebResponse(true){ StatusCode=HttpStatusCode.NotFound, Message="PqrCase not found"}; return new CustomWebResponse{ ResponseBody=_mapper.Map<Application.Common.Dtos.PqrCaseDto>(entity)}; } } }